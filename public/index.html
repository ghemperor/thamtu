<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Deception: Murder in Hong Kong (Ti·∫øng Vi·ªát)</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Roboto:wght@300;400;500&display=swap"
        rel="stylesheet">
</head>

<body>

    <div id="app">
        <!-- Connecting / Login Screen -->
        <div id="login-screen" class="screen">
            <h1>Deception</h1>
            <h2>B·∫£n Ti·∫øng Vi·ªát</h2>
            <div class="input-group">
                <input type="text" id="username" placeholder="Nh·∫≠p bi·ªát danh..." maxlength="12">
                <button id="btn-join">Tham gia</button>
            </div>
        </div>

        <!-- Lobby Screen -->
        <div id="lobby-screen" class="screen hidden">
            <h1>Ph√≤ng Ch·ªù</h1>

            <!-- ADMIN CONTROLS -->
            <div id="admin-controls" class="hidden"
                style="background: #252525; padding: 10px; border-radius: 5px; margin-bottom: 10px; border: 1px solid #444;">
                <h3 style="color: #f1c40f; margin-top:0;">C√†i ƒê·∫∑t Game (Ch·ªß Ph√≤ng)</h3>
                <label style="display:block; margin: 5px 0;">
                    <input type="checkbox" id="chk-accomplice"> Th√™m T√≤ng Ph·∫°m
                </label>
                <label style="display:block; margin: 5px 0;">
                    <input type="checkbox" id="chk-witness"> Th√™m Nh√¢n Ch·ª©ng
                </label>
            </div>

            <!-- Voice Controls Moved to Sidebar -->

            <div id="player-list" class="player-grid"></div>
            <div class="controls">
                <button id="btn-ready">S·∫µn S√†ng</button>
                <button id="btn-start" class="hidden">B·∫Øt ƒê·∫ßu Game</button>
            </div>
            <p id="wait-msg" class="hidden" style="color: #999; margin-top: 10px;">Ch·ªù ch·ªß ph√≤ng b·∫Øt ƒë·∫ßu...</p>
        </div>

        <!-- Role Reveal Screen (Brief) -->
        <div id="role-screen" class="screen hidden">
            <h1>M·∫¨T V·ª§</h1>
            <div class="role-card">
                <h2 id="my-role">Th√°m T·ª≠</h2>
                <p id="role-desc">H√£y t√¨m ra s·ª± th·∫≠t.</p>
            </div>
        </div>

        <!-- Game Board -->
        <div id="game-screen" class="screen hidden">
            <header>
                <div class="game-info">
                    <span id="role-display">Vai: ???</span>
                    <span id="round-display">V√≤ng: 1</span>
                    <span id="badge-display">Ph√π Hi·ªáu: C√≤n</span>
                </div>
            </header>

            <div id="game-layout">
                <!-- LEFT COLUMN: Game Area -->
                <div id="game-main-content">
                    <!-- Scientist View: Tiles -->
                    <div id="scientist-panel" class="panel hidden">
                        <h3>Th√¥ng ƒëi·ªáp t·ª´ Ph√°p Y (B·∫°n l√† Ph√°p Y)</h3>
                        <div id="tiles-container" class="tiles-grid"></div>
                    </div>

                    <!-- Public View: Tiles (Read Only) -->
                    <div id="public-tiles-panel" class="panel">
                        <h3>Manh m·ªëi hi·ªán tr∆∞·ªùng</h3>
                        <div id="public-tiles-container" class="tiles-grid"></div>
                    </div>

                    <!-- Players and Cards -->
                    <div id="table-area">
                        <h3>Danh S√°ch Nghi Ph·∫°m</h3>
                        <div id="other-players" class="player-cards-grid"></div>
                    </div>
                </div>

                <!-- RIGHT COLUMN: Sidebar (Chat, Logs, Controls) -->
                <div id="game-sidebar">
                    <!-- Admin Controls Area -->
                    <div id="admin-panel-sidebar" class="hidden"></div>

                    <!-- Unified Tabs Container -->
                    <div id="sidebar-tabs">
                        <div class="tab-header">
                            <button id="tab-btn-chat" class="tab-btn active">üí¨ Th·∫£o lu·∫≠n</button>
                            <button id="tab-btn-log" class="tab-btn">üìì Nh·∫≠t K√Ω</button>
                        </div>

                        <div id="tab-content-area">
                            <!-- CHAT TAB -->
                            <div id="tab-chat" class="tab-pane active">
                                <!-- Voice Controls -->
                                <div id="voice-controls"
                                    style="padding: 10px; text-align: center; border-bottom: 1px solid #444; background: rgba(0,0,0,0.2);">
                                    <button id="btn-mic" class="admin-btn"
                                        style="background: #e74c3c; width: 100%; padding: 8px;">üîá B·∫≠t Mic (Voice
                                        Chat)</button>
                                    <div id="voice-status" style="font-size: 0.75rem; color: #bbb; margin-top: 4px;">
                                        Ch∆∞a k·∫øt n·ªëi</div>
                                </div>
                                <div id="chat-messages"></div>
                                <div class="chat-input-area">
                                    <input type="text" id="chat-input" placeholder="N√≥i g√¨ ƒë√≥..." autocomplete="off">
                                    <button id="btn-send-chat">G·ª≠i</button>
                                </div>
                            </div>

                            <!-- LOG TAB -->
                            <div id="tab-log" class="tab-pane">
                                <div id="log-list"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Action Buttons (Sticky Bottom - Global) -->
            <div id="action-bar" class="hidden">
                <button id="btn-commit-crime" class="action-btn murder-btn">G√ÇY √ÅN (Ch·ªçn 2 th·∫ª)</button>
            </div>

            <!-- Action Modal -->
            <div id="modal" class="modal hidden">
                <div class="modal-content">
                    <h2 id="modal-title">H√†nh ƒê·ªông</h2>
                    <p id="modal-desc">Ch·ªçn...</p>
                    <div id="modal-selection"></div>
                    <div class="modal-buttons">
                        <button id="btn-confirm-action">X√°c Nh·∫≠n</button>
                        <button id="btn-cancel-action">H·ªßy</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Game Over Screen -->
        <div id="game-over-screen" class="screen hidden">
            <h1 id="winner-text">K·∫øt Th√∫c</h1>
            <p id="game-over-reason" style="color: #ccc; margin-bottom: 20px;"></p>
            <div id="solution-reveal"></div>
            <button id="btn-restart">Ch·ªù x·ª≠ l√Ω...</button>
        </div>

    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script src="client.js"></script>
</body>

</html>